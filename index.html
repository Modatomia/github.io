<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modatomía - Recursos Educativos</title>
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Auth0 SDK -->
      <!-- Auth0 Configuration -->
      <script>
        const config = {
            domain: 'dev-ao28w8mm01qxvpqa.us.auth0.com',
            client_id: 'POytIwtV3rWDTkS4apTJCeMzhVqX8v1e',
            redirect_uri: window.location.origin,
            ui_locales: 'es',
            defaultLoginOptions: {
                ui: {
                    theme: {
                        primaryColor: '#1E3D59',
                        backgroundColor: '#F5F5F5'
                    },
                    logo: 'https://recursos.modatomia.com/assets/logo.png',
                    title: 'Bienvenido a Modatomía',
                    socialButtonStyle: 'big',
                    displayName: 'Modatomía'
                }
            }
        };

        const initAuth0 = async () => {
            try {
                const auth0Client = await auth0.createAuth0Client({
                    ...config
                });

                // Login button
                document.getElementById('login').addEventListener('click', async () => {
                    console.log('Iniciando login...');
                    await auth0Client.loginWithRedirect();
                });

                // Logout button
                document.getElementById('logout').addEventListener('click', async () => {
                    await auth0Client.logout({
                        returnTo: window.location.origin
                    });
                });

                // Check auth state
                const isAuthenticated = await auth0Client.isAuthenticated();
                document.getElementById('login').style.display = isAuthenticated ? 'none' : 'block';
                document.getElementById('logout').style.display = isAuthenticated ? 'block' : 'none';

                console.log('Auth0 inicializado correctamente');
            } catch (error) {
                console.error('Error inicializando Auth0:', error);
            }
        };

        // Init when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAuth0);
        } else {
            initAuth0();
        }
      </script>
  </body>
</html>
